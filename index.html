<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Copyright Free Shorts Maker</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #111;
        color: white;
        text-align: center;
        padding: 20px;
    }
    input, button {
        padding: 10px;
        margin: 10px;
        font-size: 16px;
    }
    video {
        margin-top: 20px;
        max-width: 100%;
        border: 3px solid white;
    }
</style>
</head>
<body>
<h1>ðŸŽ¬ Copyright Free YouTube Shorts Maker</h1>
<p>Pixabay se images lekar Shorts video banayein</p>

<input type="text" id="prompt" placeholder="Apna topic likhen (e.g., Modern House Design)">
<button onclick="fetchImages()">Fetch & Make Video</button>

<div id="status"></div>
<video id="preview" controls></video>
<a id="downloadLink" style="display:none;" download="shorts.mp4">Download Video</a>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ffmpeg.js/0.10.0/ffmpeg.min.js"></script>
<script>
const API_KEY = "51777376-6b21c1de1fac2e2b2c7737249"; // Aapki Pixabay API Key

async function fetchImages() {
    const query = document.getElementById("prompt").value.trim();
    if (!query) {
        alert("Please enter a topic!");
        return;
    }

    document.getElementById("status").innerText = "Fetching images...";
    
    const url = `https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=vertical&per_page=5`;
    
    const res = await fetch(url);
    const data = await res.json();
    
    if (!data.hits.length) {
        document.getElementById("status").innerText = "No images found!";
        return;
    }

    document.getElementById("status").innerText = "Creating video...";
    createVideo(data.hits.map(img => img.largeImageURL));
}

async function createVideo(imageUrls) {
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = 1080;
    canvas.height = 1920;

    const stream = canvas.captureStream();
    const audio = await fetchNaturalSounds();
    const audioStream = audio.captureStream();
    const combinedStream = new MediaStream([...stream.getTracks(), ...audioStream.getTracks()]);

    const mediaRecorder = new MediaRecorder(combinedStream, { mimeType: "video/webm" });
    const chunks = [];

    mediaRecorder.ondataavailable = e => chunks.push(e.data);
    mediaRecorder.onstop = () => {
        const blob = new Blob(chunks, { type: "video/webm" });
        const videoUrl = URL.createObjectURL(blob);
        document.getElementById("preview").src = videoUrl;
        document.getElementById("downloadLink").href = videoUrl;
        document.getElementById("downloadLink").style.display = "block";
        document.getElementById("status").innerText = "Video Ready!";
    };

    mediaRecorder.start();

    for (let imgUrl of imageUrls) {
        const img = await loadImage(imgUrl);
        ctx.drawImage(img, 0, 0, 1080, 1920);
        await wait(2000); // Har image 2 sec
    }

    mediaRecorder.stop();
}

function loadImage(url) {
    return new Promise((resolve) => {
        const img = new Image();
        img.crossOrigin = "anonymous";
        img.onload = () => resolve(img);
        img.src = url;
    });
}

function wait(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

async function fetchNaturalSounds() {
    const audio = new Audio("https://cdn.pixabay.com/download/audio/2021/08/08/audio_0e27f45d89.mp3?filename=forest-birds-chirping-ambient-110624.mp3");
    await audio.play().catch(() => {});
    return audio;
}
</script>
</body>
</html>
